@model List<Card>
@{
    ViewData["Title"] = "Cards";
}

<div class="photographer-dashboard--wrapper photographer-cards">
    <h2 class="header-large">Your Codes</h2>
    <div class="yellow-background line--small"></div>

    <div class="flex-box filters">
        <input class="input--light-blue searchbox" placeholder="Search Code" />

        @*<div class="view-icons align-right">
            <select>
                <option>Date</option>
                <option>Code</option>
            </select>
        </div>*@

        <a href="@Url.Action("ExportNewCard","Photographer")" class="btn-pou-default">Export new card</a>
    </div>

    

    <div class="flex-box">
        <table class="table table-striped">
            <thead>
                <tr>
                    <td>Code</td>
                    <td>Date</td>
                    <td>Actions</td>
                </tr>
            </thead>
            <tbody>
                @foreach (var card in Model.OrderByDescending(x=>x.CreatedDate).ThenByDescending(x=>x.Id))
                {
                    <tr>
                        <td>@card.Code</td>
                        <td>@card.CreatedDate.ToShortDateString()</td>
                        <td><a class="btn btn-pou-default" href="#">Export</a></td>
                    </tr>
                }

            </tbody>
        </table>
    </div>

</div>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    $(document).ready(function () {
        //todo: finish the export many cards logic
        @*exportNewCards = () => {
            swal({
                title: 'How many cards do you want to export?',
                input: 'number',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Export',
                animation: false,
                showLoaderOnConfirm: true,
            }).then((result) => {
                if (result.value) {
                    $.ajax({
                        url: "@Url.Action("ExportCard","Photographer")",
                        data: JSON.stringify({ quantity: result.value }),
                        success: function () {
                            swal({
                                type: 'success',
                                title: 'Ajax request finished!',
                                html: 'Submitted email: ' + result.value
                            })
                        }
                    });


                }
            })

        }*@
    })
</script>