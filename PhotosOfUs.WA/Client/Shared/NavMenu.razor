<nav class="landing-navbar navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="">
        <img src="/images/logo.png" alt="Photos Of Us" />
    </a>

    <button class="navbar-toggler" type="button" @onclick="@ToggleNavMenu"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="@NavMenuCssClass navbar-collapse" id="navbarSupportedContent" @onclick="@ToggleNavMenu">
        <ul class="navbar-nav mr-auto">
            <AuthorizeView Policy="Admin">
                <Authorized>
                    <li class="nav-item">
                        <NavLink class="nav-link" href="/Photographer">
                            Dashboard
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="nav-link" href="/Photographer/Cards">
                            Cards
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <a href="/Photographer/SalesHistory"><img src="~/images/icons/alert.png" alt="notifications" /></a>
                        @*<img src="@(CurrentUser.ProfilePictureUrl() ?? "~/images/avatar_512.png")" @onclick=@ToggleDropdown class="profileImg" />*@
                    </li>

                    @if (ViewDropdown == true)
                    {
                        <div class="nav-dropdown">
                            @*<div class="adminMenu__arrow"></div>*@
                            <div class="nav-dropdown-arrow"></div>
                            <a class="nav-dropdown-link" href="/Photographer">Photo Gallery</a>
                            <a class="nav-dropdown-link" href="/Photographer/SalesHistory">Sales History</a>
                            <a class="nav-dropdown-link" href="/Photographer/Cards">Cards</a>
                            <a class="nav-dropdown-link" href="/Photographer/Account">Account Settings</a>
                            <a class="nav-dropdown-link" href="/Photographer/Profile">Profile</a>
                            <a class="nav-dropdown-link logout" href="/Session/SignOut">Log Out</a>
                        </div>
                    }
                </Authorized>
            </AuthorizeView>

            <AuthorizeView Policy="Customer">
                <Authorized>
                    <li class="nav-item">
                        <NavLink class="nav-link" href="/Photographer/Search">
                            Search
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="nav-link" href="/Photographer/PublicCode">
                            Code
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        @*<cart-mini></cart-mini>*@
                        @*<img src="@(CurrentUser.ProfilePictureUrl() ?? "~/images/avatar_512.png")" @onclick="@ToggleDropdown" class="profileImg" />*@
                    </li>

                    @if (ViewDropdown == true)
                    {
                        <div class="nav-dropdown">
                            @*<div class="adminMenu__arrow"></div>*@
                            <div class="nav-dropdown-arrow"></div>
                            <a class="nav-dropdown-link" href="/Orders/OrderHistory">Order History</a>
                            <a class="nav-dropdown-link logout" href="~/Session/SignOut">Log Out</a>
                        </div>
                    }
                </Authorized>
            </AuthorizeView>

            <LoginDisplay>
            </LoginDisplay>

        </ul>
    </div>
</nav>

@functions {
    bool collapseNavMenu = true;
    string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    bool ViewDropdown;

    void ToggleDropdown() => ViewDropdown = !ViewDropdown;

    void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}
